{"ast":null,"code":"import _taggedTemplateLiteral from\"C:/Users/user/Documents/GitHub/neighborhood_restaurant/client/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral.js\";var _templateObject,_templateObject2,_templateObject3,_templateObject4,_templateObject5;import{AnimatePresence,motion}from\"framer-motion\";import{useState,useEffect}from\"react\";import styled from\"styled-components\";import axios from\"axios\";import{useNavigate}from\"react-router-dom\";// react-router-dom의 useNavigate 사용\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const Container=styled.div(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n    position: relative;\\n    margin: auto;\\n    margin-bottom: 50px;\\n    margin-top: 50px;\\n    background-color: black;\\n    height: 300px;\\n    width: 1200px;\\n    overflow: hidden;\\n\"])));const Slider=styled(motion.div)(_templateObject2||(_templateObject2=_taggedTemplateLiteral([\"\\n  display: grid;\\n  gap: 10px;\\n  grid-template-columns: repeat(4, 1fr);\\n  position: absolute;\\n  width: 100%;\\n  top: 50px;\\n\"])));const PlaceBox=styled(motion.img)(_templateObject3||(_templateObject3=_taggedTemplateLiteral([\"\\n    background-color: white;\\n    width: 100%;\\n    height: 200px;\\n    background-size: cover;\\n    background-position: center center;\\n    color: black;\\n\"])));const NextBtn=styled.button(_templateObject4||(_templateObject4=_taggedTemplateLiteral([\"\\n    position: absolute;\\n    right: 0;\\n    top: 50%;\\n\"])));const PrevBtn=styled.button(_templateObject5||(_templateObject5=_taggedTemplateLiteral([\"\\n    position: absolute;\\n    top: 50%;\\n\"])));const SliderVar={hidden:isBack=>({x:isBack?-1200-10:1200+10}),visible:{x:0},exit:isBack=>({x:isBack?1200+10:-1200-10})};export default function MyPlace(){const[Index,setIndex]=useState(0);const[back,setBack]=useState(false);const[leaving,setLeaving]=useState(false);const[imageUrls,setImageUrls]=useState([]);const Navigate=useNavigate();// useNavigate 사용하여 Navigate 객체를 가져옴\nuseEffect(()=>{async function fetchImages(){try{const response=await axios.get('/img');const shuffledImages=response.data.images.sort(()=>Math.random()-0.5);setImageUrls(shuffledImages);}catch(error){console.error('Error fetching images:',error);}}fetchImages();},[]);const nextPlease=async()=>{if(leaving)return;toggleLeaving();await setBack(false);setIndex(prev=>prev===16?0:prev+4);};const prevPlease=async()=>{if(leaving)return;toggleLeaving();await setBack(true);setIndex(prev=>prev===0?16:prev-4);};const toggleLeaving=()=>setLeaving(cur=>!cur);// 이미지 클릭 시 해당 place의 ID로 이동하는 함수\nconst handleImageClick=async imageUrl=>{try{// 클릭된 이미지의 URL을 서버로 전송하여 음식점 ID를 받아옵니다.\nconsole.log('Sending request for imageUrl:',imageUrl);// URL 요청 콘솔 로깅\nconst response=await axios.post('/restaurantId',{imageUrl});const restaurantId=response.data.restaurantId;Navigate(\"/place/\".concat(restaurantId));// 해당하는 place의 ID로 이동\n}catch(error){console.error('Error fetching restaurantId:',error);}};return/*#__PURE__*/_jsx(Container,{children:/*#__PURE__*/_jsxs(AnimatePresence,{initial:false,onExitComplete:toggleLeaving,children:[/*#__PURE__*/_jsx(Slider,{custom:back,variants:SliderVar,initial:\"hidden\",animate:\"visible\",exit:\"exit\",transition:{type:\"tween\",duration:1},children:imageUrls.slice(Index,Index+4).map((imageUrl,idx)=>/*#__PURE__*/_jsx(PlaceBox,{src:imageUrl,onClick:()=>handleImageClick(imageUrl)// 클릭 시 handleImageClick 함수 호출\n},idx))},Index),/*#__PURE__*/_jsx(PrevBtn,{onClick:prevPlease,children:\"prev\"}),/*#__PURE__*/_jsx(NextBtn,{onClick:nextPlease,children:\"next\"})]})});}","map":{"version":3,"names":["AnimatePresence","motion","useState","useEffect","styled","axios","useNavigate","jsx","_jsx","jsxs","_jsxs","Container","div","_templateObject","_taggedTemplateLiteral","Slider","_templateObject2","PlaceBox","img","_templateObject3","NextBtn","button","_templateObject4","PrevBtn","_templateObject5","SliderVar","hidden","isBack","x","visible","exit","MyPlace","Index","setIndex","back","setBack","leaving","setLeaving","imageUrls","setImageUrls","Navigate","fetchImages","response","get","shuffledImages","data","images","sort","Math","random","error","console","nextPlease","toggleLeaving","prev","prevPlease","cur","handleImageClick","imageUrl","log","post","restaurantId","concat","children","initial","onExitComplete","custom","variants","animate","transition","type","duration","slice","map","idx","src","onClick"],"sources":["C:/Users/user/Documents/GitHub/neighborhood_restaurant/client/src/components/MyPlace.tsx"],"sourcesContent":["import { AnimatePresence, motion } from \"framer-motion\";\r\nimport { useState, useEffect } from \"react\";\r\nimport styled from \"styled-components\";\r\nimport axios from \"axios\";\r\nimport { useNavigate } from \"react-router-dom\"; // react-router-dom의 useNavigate 사용\r\n\r\nconst Container = styled.div`\r\n    position: relative;\r\n    margin: auto;\r\n    margin-bottom: 50px;\r\n    margin-top: 50px;\r\n    background-color: black;\r\n    height: 300px;\r\n    width: 1200px;\r\n    overflow: hidden;\r\n`\r\n\r\nconst Slider = styled(motion.div)`\r\n  display: grid;\r\n  gap: 10px;\r\n  grid-template-columns: repeat(4, 1fr);\r\n  position: absolute;\r\n  width: 100%;\r\n  top: 50px;\r\n`\r\n\r\nconst PlaceBox = styled(motion.img)`\r\n    background-color: white;\r\n    width: 100%;\r\n    height: 200px;\r\n    background-size: cover;\r\n    background-position: center center;\r\n    color: black;\r\n`\r\n\r\nconst NextBtn = styled.button`\r\n    position: absolute;\r\n    right: 0;\r\n    top: 50%;\r\n`\r\n\r\nconst PrevBtn = styled.button`\r\n    position: absolute;\r\n    top: 50%;\r\n`\r\n\r\nconst SliderVar = {\r\n    hidden: (isBack: boolean) => ({\r\n        x: isBack ? -1200 - 10 : 1200 + 10,\r\n    }),\r\n    visible: {\r\n        x: 0,\r\n    },\r\n    exit: (isBack: boolean) => ({\r\n        x: isBack ? 1200 + 10 : -1200 - 10,\r\n    }),\r\n};\r\n\r\n\r\nexport default function MyPlace() {\r\n    const [Index, setIndex] = useState(0);\r\n    const [back, setBack] = useState(false);\r\n    const [leaving, setLeaving] = useState(false);\r\n    const [imageUrls, setImageUrls] = useState([]);\r\n    const Navigate = useNavigate (); // useNavigate 사용하여 Navigate 객체를 가져옴\r\n\r\n    useEffect(() => {\r\n        async function fetchImages() {\r\n            try {\r\n                const response = await axios.get('/img');\r\n                const shuffledImages = response.data.images.sort(() => Math.random() - 0.5);\r\n                setImageUrls(shuffledImages);\r\n            } catch (error) {\r\n                console.error('Error fetching images:', error);\r\n            }\r\n        }\r\n\r\n        fetchImages();\r\n    }, []);\r\n\r\n    const nextPlease = async () => {\r\n        if (leaving) return;\r\n        toggleLeaving();\r\n        await setBack(false);\r\n        setIndex((prev) => (prev === 16 ? 0 : prev + 4));\r\n    };\r\n\r\n    const prevPlease = async () => {\r\n        if (leaving) return;\r\n        toggleLeaving();\r\n        await setBack((true));\r\n        setIndex((prev) => (prev === 0 ? 16 : prev - 4));\r\n    };\r\n\r\n    const toggleLeaving = () => setLeaving((cur) => !cur);\r\n\r\n // 이미지 클릭 시 해당 place의 ID로 이동하는 함수\r\nconst handleImageClick = async (imageUrl:any) => {\r\n    try {\r\n        // 클릭된 이미지의 URL을 서버로 전송하여 음식점 ID를 받아옵니다.\r\n        console.log('Sending request for imageUrl:', imageUrl); // URL 요청 콘솔 로깅\r\n        const response = await axios.post('/restaurantId', { imageUrl });\r\n        const restaurantId = response.data.restaurantId;\r\n        Navigate(`/place/${restaurantId}`); // 해당하는 place의 ID로 이동\r\n    } catch (error) {\r\n        console.error('Error fetching restaurantId:', error);\r\n    }\r\n};\r\n\r\n\r\n    return (\r\n        <Container>\r\n            <AnimatePresence initial={false} onExitComplete={toggleLeaving}>\r\n                <Slider\r\n                    custom={back}\r\n                    variants={SliderVar}\r\n                    initial=\"hidden\"\r\n                    animate=\"visible\"\r\n                    exit=\"exit\"\r\n                    transition={{ type: \"tween\", duration: 1 }}\r\n                    key={Index}\r\n                >\r\n                    {imageUrls.slice(Index, Index + 4).map(\r\n                        (imageUrl, idx) => (\r\n                            <PlaceBox\r\n                                src={imageUrl}\r\n                                key={idx}\r\n                                onClick={() => handleImageClick(imageUrl)} // 클릭 시 handleImageClick 함수 호출\r\n                            />\r\n                        )\r\n                    )}\r\n                </Slider>\r\n                <PrevBtn onClick={prevPlease}>prev</PrevBtn>\r\n                <NextBtn onClick={nextPlease}>next</NextBtn>\r\n            </AnimatePresence>\r\n        </Container>\r\n    );\r\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}