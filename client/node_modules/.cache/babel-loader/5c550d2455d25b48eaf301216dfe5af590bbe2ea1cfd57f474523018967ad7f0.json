{"ast":null,"code":"import _taggedTemplateLiteral from\"C:/Users/user/Documents/GitHub/neighborhood_restaurant/client/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral.js\";var _templateObject,_templateObject2,_templateObject3,_templateObject4,_templateObject5,_templateObject6,_templateObject7,_templateObject8;import{useForm}from\"react-hook-form\";import styled from\"styled-components\";import{useNavigate}from\"react-router-dom\";import{useRecoilState,useSetRecoilState}from\"recoil\";import{keyword,neighborhood_search}from\"../atom\";import axios from\"axios\";import{motion}from\"framer-motion\";import{useEffect,useState}from\"react\";// useEffect 추가\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";const Nav=styled.div(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n    display: flex;\\n    justify-content: space-between;\\n    background-color: black;\\n    height: 100px;\\n    width: 100%;\\n    @media screen and (max-width: 700px) {\\n        flex-direction: column;\\n        align-items: flex-start;\\n        height: 250px;\\n}\\n\"])));const Logo=styled(motion.div)(_templateObject2||(_templateObject2=_taggedTemplateLiteral([\"\\n    text-decoration: none;\\n    color: white;\\n    margin-left: 30px;\\n    margin-top:33px;\\n    margin-bottom: 10px;\\n    cursor: pointer;\\n    font-size: 40px;\\n    font-family: \\\"Black Han Sans\\\", sans-serif;\\n    font-weight: 400;\\n    font-style: normal;\\n\"])));// const SearchContainer = styled.div`\n//     position: relative;\n//     background-color: whitesmoke;\n//     width: 400px;\n//     height: 50px;\n//     margin: 25px;\n//     border-radius: 10px;\n// `\nconst Search=styled.form(_templateObject3||(_templateObject3=_taggedTemplateLiteral([\"\\n    position: relative;\\n    background-color: whitesmoke;\\n    width: 400px;\\n    height: 50px;\\n    margin: 25px;\\n    border-radius: 10px;\\n\"])));const SearchInput=styled.input(_templateObject4||(_templateObject4=_taggedTemplateLiteral([\"\\n    position: absolute;\\n    left: 35px;\\n    top: 10px;\\n    width: 300px;\\n    height: 30px;\\n    font-size: 20px;\\n    border-radius: 10px;\\n    border-width: 0;\\n    background-color: whitesmoke;\\n    border-width: 0px;\\n    outline: none;\\n\"])));const SearchBtn=styled.button(_templateObject5||(_templateObject5=_taggedTemplateLiteral([\"\\n    position: absolute;\\n    background-color: transparent;\\n    border-width: 0px;\\n    top: 15px;\\n    right: 10px;\\n    width: 50px;\\n\"])));const DeleteBtn=styled(motion.button)(_templateObject6||(_templateObject6=_taggedTemplateLiteral([\"\\n    position: absolute;\\n    top: 13px;\\n    left: 5px;\\n    margin-right: 100yypx;\\n    background-color: transparent;\\n    border-radius: 5px;\\n    background-color: #d8d8d8;\\n    border-width: 0px;\\n    hover: {scale: 1.2}\\n\"])));const LoginContainer=styled.div(_templateObject7||(_templateObject7=_taggedTemplateLiteral([\"\\n    margin: 20px;\\n\"])));const Login=styled(motion.div)(_templateObject8||(_templateObject8=_taggedTemplateLiteral([\"\\n    color: white;\\n    margin: 10px;\\n    cursor: pointer;\\n\"])));export default function Header(){const{register,handleSubmit,getValues,watch}=useForm();const navigate=useNavigate();const setSearchWord=useSetRecoilState(keyword);const[isNeighborhood,setIsNeighborhood]=useRecoilState(neighborhood_search);const[userId,setUserId]=useState('');useEffect(()=>{// Check if userId exists in localStorage\nconst storedUserId=localStorage.getItem('userId');if(storedUserId){setUserId(storedUserId);}},[]);const onValid=_ref=>{let{search}=_ref;setSearchWord(search);// console.log(\"header:\", search)\nnavigate(\"/search?keyword=\".concat(search));};const handleSaveLocation=()=>{// Save location manually\nsaveLocation();};const saveLocation=async()=>{try{navigator.geolocation.getCurrentPosition(async position=>{const{latitude,longitude}=position.coords;await axios.post('/location',{id:userId,x:longitude,y:latitude});console.log('사용자 ID:',userId);// 사용자 ID 콘솔에 출력\nconsole.log('위치 좌표:',longitude,latitude);// 위치 좌표 콘솔에 출력\nalert('위치가 성공적으로 저장되었습니다.');});}catch(error){console.error('위치 저장 중 오류가 발생했습니다:',error);alert('위치를 저장하는 도중 오류가 발생했습니다.');}};return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(Nav,{children:[/*#__PURE__*/_jsx(Logo,{transition:{type:\"spring\",damping:10},initial:{scale:0},animate:{scale:1},whileHover:{scale:1.2},onClick:()=>navigate(\"/\"),children:\"\\uB3D9\\uB124\\uB9DB\\uC9D1\"}),/*#__PURE__*/_jsxs(Search,{onSubmit:handleSubmit(onValid),children:[watch('search')?/*#__PURE__*/_jsx(DeleteBtn,{className:\"btn-close\",\"aria-label\":\"Close\",type:\"reset\"}):null,/*#__PURE__*/_jsx(SearchInput,{...register(\"search\",{required:true})}),/*#__PURE__*/_jsx(SearchBtn,{type:\"submit\",children:/*#__PURE__*/_jsx(\"svg\",{xmlns:\"http://www.w3.org/2000/svg\",width:\"25\",height:\"25\",fill:\"currentColor\",className:\"bi bi-search\",viewBox:\"0 0 16 16\",children:/*#__PURE__*/_jsx(\"path\",{d:\"M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001q.044.06.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1 1 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0\"})})})]}),/*#__PURE__*/_jsxs(LoginContainer,{children:[/*#__PURE__*/_jsx(Login,{onClick:()=>{navigate('/register');},children:\"\\uD68C\\uC6D0\\uAC00\\uC785\"}),/*#__PURE__*/_jsx(Login,{onClick:()=>{navigate('/login');},children:\"\\uB85C\\uADF8\\uC778\"})]}),/*#__PURE__*/_jsx(\"button\",{onClick:handleSaveLocation,children:\"\\uC704\\uCE58 \\uC800\\uC7A5\"})]})});}","map":{"version":3,"names":["useForm","styled","useNavigate","useRecoilState","useSetRecoilState","keyword","neighborhood_search","axios","motion","useEffect","useState","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Nav","div","_templateObject","_taggedTemplateLiteral","Logo","_templateObject2","Search","form","_templateObject3","SearchInput","input","_templateObject4","SearchBtn","button","_templateObject5","DeleteBtn","_templateObject6","LoginContainer","_templateObject7","Login","_templateObject8","Header","register","handleSubmit","getValues","watch","navigate","setSearchWord","isNeighborhood","setIsNeighborhood","userId","setUserId","storedUserId","localStorage","getItem","onValid","_ref","search","concat","handleSaveLocation","saveLocation","navigator","geolocation","getCurrentPosition","position","latitude","longitude","coords","post","id","x","y","console","log","alert","error","children","transition","type","damping","initial","scale","animate","whileHover","onClick","onSubmit","className","required","xmlns","width","height","fill","viewBox","d"],"sources":["C:/Users/user/Documents/GitHub/neighborhood_restaurant/client/src/components/Header.tsx"],"sourcesContent":["import { useForm } from \"react-hook-form\"\r\nimport styled from \"styled-components\"\r\nimport { Link, useNavigate } from \"react-router-dom\";\r\nimport { useRecoilState, useRecoilValue, useSetRecoilState } from \"recoil\";\r\nimport { keyword, neighborhood_search, register_showing } from \"../atom\";\r\nimport axios from \"axios\";\r\nimport { AnimatePresence, motion } from \"framer-motion\"\r\nimport { useEffect, useState } from \"react\"; // useEffect 추가\r\n\r\n\r\nconst Nav = styled.div`\r\n    display: flex;\r\n    justify-content: space-between;\r\n    background-color: black;\r\n    height: 100px;\r\n    width: 100%;\r\n    @media screen and (max-width: 700px) {\r\n        flex-direction: column;\r\n        align-items: flex-start;\r\n        height: 250px;\r\n}\r\n`\r\n\r\nconst Logo = styled(motion.div)`\r\n    text-decoration: none;\r\n    color: white;\r\n    margin-left: 30px;\r\n    margin-top:33px;\r\n    margin-bottom: 10px;\r\n    cursor: pointer;\r\n    font-size: 40px;\r\n    font-family: \"Black Han Sans\", sans-serif;\r\n    font-weight: 400;\r\n    font-style: normal;\r\n`\r\n\r\n// const SearchContainer = styled.div`\r\n//     position: relative;\r\n//     background-color: whitesmoke;\r\n//     width: 400px;\r\n//     height: 50px;\r\n//     margin: 25px;\r\n//     border-radius: 10px;\r\n// `\r\n\r\nconst Search = styled.form`\r\n    position: relative;\r\n    background-color: whitesmoke;\r\n    width: 400px;\r\n    height: 50px;\r\n    margin: 25px;\r\n    border-radius: 10px;\r\n`\r\n\r\nconst SearchInput = styled.input`\r\n    position: absolute;\r\n    left: 35px;\r\n    top: 10px;\r\n    width: 300px;\r\n    height: 30px;\r\n    font-size: 20px;\r\n    border-radius: 10px;\r\n    border-width: 0;\r\n    background-color: whitesmoke;\r\n    border-width: 0px;\r\n    outline: none;\r\n`\r\n\r\nconst SearchBtn = styled.button`\r\n    position: absolute;\r\n    background-color: transparent;\r\n    border-width: 0px;\r\n    top: 15px;\r\n    right: 10px;\r\n    width: 50px;\r\n`\r\n\r\nconst DeleteBtn = styled(motion.button)`\r\n    position: absolute;\r\n    top: 13px;\r\n    left: 5px;\r\n    margin-right: 100yypx;\r\n    background-color: transparent;\r\n    border-radius: 5px;\r\n    background-color: #d8d8d8;\r\n    border-width: 0px;\r\n    hover: {scale: 1.2}\r\n`\r\n\r\nconst LoginContainer = styled.div`\r\n    margin: 20px;\r\n`\r\n\r\nconst Login = styled(motion.div)`\r\n    color: white;\r\n    margin: 10px;\r\n    cursor: pointer;\r\n`\r\n\r\ninterface DataForm {\r\n    search: string\r\n}\r\n\r\nexport default function Header() {\r\n    const { register, handleSubmit, getValues, watch } = useForm<DataForm>();\r\n    const navigate = useNavigate();\r\n    const setSearchWord = useSetRecoilState(keyword);\r\n    const [isNeighborhood, setIsNeighborhood] = useRecoilState(neighborhood_search);\r\n    const [userId, setUserId] = useState<string>('');\r\n\r\n    useEffect(() => {\r\n        // Check if userId exists in localStorage\r\n        const storedUserId = localStorage.getItem('userId');\r\n        if (storedUserId) {\r\n            setUserId(storedUserId);\r\n        }\r\n    }, []);\r\n\r\n    const onValid = ({ search }: DataForm) => {\r\n        setSearchWord(search);\r\n        // console.log(\"header:\", search)\r\n        navigate(`/search?keyword=${search}`);\r\n    };\r\n\r\n    const handleSaveLocation = () => {\r\n        // Save location manually\r\n        saveLocation();\r\n    };\r\n\r\n    const saveLocation = async () => {\r\n        try {\r\n            navigator.geolocation.getCurrentPosition(async (position) => {\r\n                const { latitude, longitude } = position.coords;\r\n                await axios.post('/location', { id: userId, x: longitude, y: latitude });\r\n                console.log('사용자 ID:', userId); // 사용자 ID 콘솔에 출력\r\n                console.log('위치 좌표:', longitude, latitude); // 위치 좌표 콘솔에 출력\r\n                alert('위치가 성공적으로 저장되었습니다.');\r\n            });\r\n        } catch (error) {\r\n            console.error('위치 저장 중 오류가 발생했습니다:', error);\r\n            alert('위치를 저장하는 도중 오류가 발생했습니다.');\r\n        }\r\n    };\r\n\r\n    return (\r\n        <>\r\n            <Nav>\r\n            <Logo\r\n                transition={{ type: \"spring\", damping: 10 }}\r\n                initial={{ scale: 0 }}\r\n                animate={{ scale: 1 }}\r\n                whileHover={{ scale: 1.2 }}\r\n                onClick={() => navigate(\"/\")}\r\n            >\r\n                동네맛집\r\n            </Logo>\r\n            <Search onSubmit={handleSubmit(onValid)}>\r\n                {watch('search') ? <DeleteBtn className=\"btn-close\" aria-label=\"Close\" type=\"reset\" /> : null}\r\n                <SearchInput {...register(\"search\", { required: true })} />\r\n                <SearchBtn type=\"submit\">\r\n                    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"25\" height=\"25\" fill=\"currentColor\" className=\"bi bi-search\" viewBox=\"0 0 16 16\">\r\n                        <path d=\"M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001q.044.06.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1 1 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0\" />\r\n                    </svg>\r\n                </SearchBtn>\r\n            </Search>\r\n            <LoginContainer>\r\n                <Login onClick={() => { navigate('/register') }}>회원가입</Login>\r\n                <Login onClick={() => { navigate('/login') }}>로그인</Login>\r\n            </LoginContainer>\r\n            <button onClick={handleSaveLocation}>위치 저장</button>\r\n        </Nav>\r\n        </>\r\n    );\r\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}