{"ast":null,"code":"import{useState}from\"react\";import{useNavigate}from\"react-router-dom\";import{ForwardArrow,PlaceBox,PlaceImg,PlaceTitle,BackArrow,Rating,Slider,EllipsisText}from\"../../styled-components/homeStyle\";import{SliderVar}from\"../../lib/homeLib\";import{AnimatePresence}from\"framer-motion\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function PlaceSlider(_ref){let{placeData}=_ref;const[Index,setIndex]=useState(0);const[back,setBack]=useState(false);const[leaving,setLeaving]=useState(false);const[restaurantData,setRestaurantData]=useState([]);const navigate=useNavigate();// const getRating = async (id: number) => {\n//     await axios.get(`/review/reviews/ratings/${id}`)\n//         .then((res) => {\n//             return res.data.averageRating;\n//         })\n//         .catch((err) => {\n//             return \"평점오류\"\n//             alert(err.response.data.message);\n//         })\n// };\nconst nextPlease=async()=>{if(leaving)return;toggleLeaving();await setBack(false);setIndex(prev=>prev===16?0:prev+8);};const prevPlease=async()=>{if(leaving)return;toggleLeaving();await setBack(true);setIndex(prev=>prev===0?16:prev-8);};const toggleLeaving=()=>setLeaving(cur=>!cur);const handleImageClick=async restaurantId=>{try{// 클릭된 이미지의 URL을 서버로 전송하여 음식점 ID를 받아옵니다.\nnavigate(\"/place/\".concat(restaurantId));// 해당하는 place의 ID로 이동\n}catch(error){console.error('Error fetching restaurantId:',error);}};return/*#__PURE__*/_jsxs(AnimatePresence,{initial:false,onExitComplete:toggleLeaving,children:[/*#__PURE__*/_jsx(Slider,{custom:back,variants:SliderVar,initial:\"hidden\",animate:\"visible\",exit:\"exit\",transition:{type:\"tween\",duration:1},children:placeData.slice(Index,Index+8).map((i,idx)=>{// const rating = getRating(i.restaurantId);\nreturn/*#__PURE__*/_jsxs(PlaceBox,{whileHover:{scale:1.1},children:[/*#__PURE__*/_jsx(PlaceImg,{src:i.img,alt:\"\\uC900\\uBE44\\uC911\",onClick:()=>handleImageClick(i.restaurantId)},idx),/*#__PURE__*/_jsxs(Rating,{children:[/*#__PURE__*/_jsx(\"span\",{style:{color:\"#ff5b32\"},children:\"\\u2605\"}),i.averageRating]}),/*#__PURE__*/_jsx(PlaceTitle,{initial:{scale:0},animate:{scale:1},transition:{delay:0.1},children:/*#__PURE__*/_jsx(EllipsisText,{children:i.restaurantName})})]},idx);})},Index),/*#__PURE__*/_jsx(BackArrow,{onClick:prevPlease}),/*#__PURE__*/_jsx(ForwardArrow,{onClick:nextPlease})]});}","map":{"version":3,"names":["useState","useNavigate","ForwardArrow","PlaceBox","PlaceImg","PlaceTitle","BackArrow","Rating","Slider","EllipsisText","SliderVar","AnimatePresence","jsx","_jsx","jsxs","_jsxs","PlaceSlider","_ref","placeData","Index","setIndex","back","setBack","leaving","setLeaving","restaurantData","setRestaurantData","navigate","nextPlease","toggleLeaving","prev","prevPlease","cur","handleImageClick","restaurantId","concat","error","console","initial","onExitComplete","children","custom","variants","animate","exit","transition","type","duration","slice","map","i","idx","whileHover","scale","src","img","alt","onClick","style","color","averageRating","delay","restaurantName"],"sources":["C:/Users/user/Documents/GitHub/neighborhood_restaurant/client/src/components/home/PlaceSlider.tsx"],"sourcesContent":["import axios from \"axios\";\r\nimport { useEffect, useState } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { Container, ForwardArrow, PlaceBox, PlaceImg, PlaceTitle, BackArrow, Rating, Slider, EllipsisText } from \"../../styled-components/homeStyle\";\r\nimport { SliderVar, restaurantForm } from \"../../lib/homeLib\"\r\nimport { AnimatePresence } from \"framer-motion\";\r\n\r\ninterface Place {\r\n    restaurantId: number;\r\n    restaurantName: string;\r\n    img: string;\r\n    averageRating: number;\r\n}\r\n\r\ninterface PlaceSliderProps {\r\n    placeData: Place[];\r\n}\r\n\r\n\r\nexport default function PlaceSlider({ placeData }: PlaceSliderProps) {\r\n    const [Index, setIndex] = useState(0);\r\n    const [back, setBack] = useState(false);\r\n    const [leaving, setLeaving] = useState(false);\r\n    const [restaurantData, setRestaurantData] = useState([]);\r\n    const navigate = useNavigate();\r\n\r\n    // const getRating = async (id: number) => {\r\n    //     await axios.get(`/review/reviews/ratings/${id}`)\r\n    //         .then((res) => {\r\n    //             return res.data.averageRating;\r\n    //         })\r\n    //         .catch((err) => {\r\n    //             return \"평점오류\"\r\n    //             alert(err.response.data.message);\r\n    //         })\r\n    // };\r\n    \r\n    const nextPlease = async () => {\r\n        if (leaving) return;\r\n        toggleLeaving();\r\n        await setBack(false);\r\n        setIndex((prev) => (prev === 16 ? 0 : prev + 8));\r\n    }\r\n    const prevPlease = async () => {\r\n        if (leaving) return;\r\n        toggleLeaving();\r\n        await setBack(true);\r\n        setIndex((prev) => (prev === 0 ? 16 : prev - 8));\r\n    }\r\n    const toggleLeaving = () => setLeaving((cur) => !cur);\r\n\r\n    const handleImageClick = async (restaurantId: Number) => {\r\n        try {\r\n            // 클릭된 이미지의 URL을 서버로 전송하여 음식점 ID를 받아옵니다.\r\n            navigate(`/place/${restaurantId}`); // 해당하는 place의 ID로 이동\r\n        } catch (error) {\r\n            console.error('Error fetching restaurantId:', error);\r\n        }\r\n    };\r\n    return (\r\n        <AnimatePresence initial={false} onExitComplete={toggleLeaving}>\r\n            <Slider\r\n                custom={back}\r\n                variants={SliderVar}\r\n                initial=\"hidden\"\r\n                animate=\"visible\"\r\n                exit=\"exit\"\r\n                transition={{ type: \"tween\", duration: 1 }}\r\n                key={Index}\r\n            >\r\n                {placeData.slice(Index, Index + 8).map(\r\n                    (i, idx) => {\r\n                        // const rating = getRating(i.restaurantId);\r\n                        return(\r\n                        <PlaceBox key={idx} whileHover={{ scale: 1.1 }}>\r\n                            <PlaceImg src={i.img} key={idx} alt=\"준비중\" onClick={() => handleImageClick(i.restaurantId)} />\r\n                            <Rating><span style={{ color: \"#ff5b32\" }}>&#9733;</span>{i.averageRating}</Rating>\r\n                            <PlaceTitle initial={{ scale: 0 }} animate={{ scale: 1 }} transition={{ delay: 0.1 }}><EllipsisText>{i.restaurantName}</EllipsisText></PlaceTitle>\r\n                        </PlaceBox>\r\n                        )}\r\n                )}\r\n            </Slider>\r\n            <BackArrow onClick={prevPlease} />\r\n            <ForwardArrow onClick={nextPlease} />\r\n        </AnimatePresence>\r\n    )\r\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}